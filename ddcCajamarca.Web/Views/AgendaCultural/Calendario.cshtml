
@{
    ViewBag.Title = "Agenda Cultural";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Registro de Acctividades</h2>
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Index", "Home")">Inicio</a>
            </li>
            <li>
                Registro de Acctividades
            </li>
            <li class="active">
                <strong>Calendario</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>

<div class="wrapper wrapper-content">
    <div class="row animated fadeInDown">

        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Registro Evento </h5>

                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">
                    <div class="form-group col-sm-6">
                        <label class="control-label">Seleccionar</label>
                        <select class="form-control" id="idopcion" name="opcion">
                            <option>Sala Capuli</option>
                            <option>Sala Kazuo Terada</option>
                            <option>Campo Santo</option>
                            <option>Ex Hospital de Varones</option>
                            <option>Ex Hospital de Mujeres</option>
                            <option>Biblioteca</option>
                            <option>Iglesia Belén</option>
                            <option>Atrio Iglesia Belén</option>
                        </select>
                    </div>
                    <div class="form-group col-sm-6">
                        <label class="control-label">Seleccionar</label>
                        <select class="form-control" id="idopcion" name="opcion">
                            <option>Evento</option>
                            <option>Ensayo</option>
                        </select>
                    </div>
                    <div class="form-group col-sm-6" id="calendario">
                        <label>Fecha Inicio</label>
                        <div class="input-group date">
                            <input name="FechaIni" id="FechaIni" type="text" class="form-control" value="@ViewBag.FechaHoy" placeholder="SELECCIONE FECHA"><span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>
                    <div class="form-group col-lg-6" id="calendario2">
                        <label>Fecha Fin</label>
                        <div class="input-group date">
                            <input name="FechaFin" id="FechaFin" type="text" class="form-control" value="@ViewBag.FechaHoy" placeholder="SELECCIONE FECHA"><span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>

                    <div class="form-group col-sm-2">
                        <label>Todo el día</label>
                        <div class="input-group">
                            <input id="TodoDia" type="checkbox" class="js-switch" />
                        </div>
                    </div>

                    <div class="form-group col-sm-5">
                        <label>Hora Incio</label>
                        <div class="input-group clockpicker" data-autoclose="true">
                            <input type="text" id="horaini" class="form-control" value="09:30">
                            <span class="input-group-addon">
                                <span class="fa fa-clock-o"></span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group col-sm-5">
                        <label>Hora Fin</label>
                        <div class="input-group clockpicker" data-autoclose="true">
                            <input type="text" id="horafin" class="form-control" value="09:30">
                            <span class="input-group-addon">
                                <span class="fa fa-clock-o"></span>
                            </span>
                        </div>
                    </div>
                    @*<div class="form-group col-sm-12">
                        <div class="text-right">
                            <button class="btn btn-sm btn-success m-t-n-xs" type="submit"><strong>Nuevo</strong></button>
                        </div>
                    </div>*@
                    <div class="form-group col-sm-6">
                        <label>*Todos los campos son obligatorios para la creación del evento.</label>
                    </div>
                    <div class="text-right">
                        <button class="btn btn-sm btn-success m-t-n-xs" type="submit"><strong>Nuevo</strong></button>
                    </div>
                    @*<div id="calendar"></div>*@

                </div>

            </div>
        </div>

        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Calendario Cultural </h5>

                    @*<div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>*@
                </div>
                <div class="ibox-content">
                    <div id="calendar"></div>
                </div>
            </div>
        </div>

    </div>

</div>

@section Styles {
    @Styles.Render("~/plugins/fullCalendarStyles")
    @Styles.Render("~/plugins/dataPickerStyles")
    @Styles.Render("~/Content/plugins/iCheck/iCheckStyles")
    @Styles.Render("~/plugins/clockpickerStyles")
    @Styles.Render("~/plugins/switcheryStyles")
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryui")
    @Scripts.Render("~/plugins/fullCalendar")
    @Scripts.Render("~/plugins/iCheck")
    @Scripts.Render("~/plugins/clockpicker")
    @Scripts.Render("~/plugins/dataPicker")
    @Scripts.Render("~/plugins/switchery")

    <script type="text/javascript">

        var elem = document.querySelector('.js-switch');
        var switchery = new Switchery(elem, { color: '#1AB394' });

        var x;
        $('#calendario .input-group.date').datepicker({
            startView: 1,
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            autoclose: true,
            format: 'dd/mm/yyyy'
        }).on('changeDate', function (selected) {
            var minDate = new Date(selected.date.valueOf());
            $('#calendario2 .input-group.date').datepicker('setStartDate', minDate);
        });
        
        $('#calendario2 .input-group.date').datepicker({
            startView: 1,
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            autoclose: true,
            format: 'dd/mm/yyyy'
        }).on('changeDate', function (selected) {
            var minDate = new Date(selected.date.valueOf());
            $('#calendario .input-group.date').datepicker('setEndDate', minDate);
        });

        $('#calendariorango .input-daterange').datepicker({
            keyboardNavigation: false,
            forceParse: false,
            autoclose: true,
            format: 'dd/mm/yyyy',
        });
        
        $('#TodoDia').change(function () {
            if ($(this).is(":checked")) {
                document.getElementById("horaini").disabled = true; 
                document.getElementById("horafin").disabled = true; 
            } else {
                document.getElementById("horaini").disabled = false;
                document.getElementById("horafin").disabled = false; 
            }
        });
        
        var count = 0;
        $('.clockpicker').clockpicker();
        $(document).ready(function () {
            
            /* initialize the calendar
             -----------------------------------------------------------------*/
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();
            $('#calendar').fullCalendar({
                locale: 'es',
                header: {
                    left: 'prevYear,prev,next,nextYear today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                editable: false,
                droppable: true,
                events: [
                    {
                        title: '1er Salon de Grabado',
                        start: new Date(y, m, 1)
                    },
                    {
                        title: 'Pieza historica del mes',
                        start: new Date(y, m, d - 5),
                        end: new Date(y, m, d - 2),
                    },
                    {
                        id: 999,
                        title: 'Seminario de Literatura "Julio Ramon Ribeyro"',
                        start: new Date(y, m, d - 3, 16, 0),
                        allDay: false,
                    },
                    {
                        id: 999,
                        title: 'La cultura cerca de tí',
                        start: new Date(y, m, d + 4, 16, 0),
                        allDay: false
                    },
                    {
                        title: 'Feria de Servicios y Productos Culturales',
                        start: new Date(y, m, d, 10, 30),
                        allDay: false
                    },
                    {
                        title: 'Foro internacional de la cultura "La Cultura Como Motor De Desarrollo"',
                        start: new Date(y, m, d, 12, 0),
                        end: new Date(y, m, d, 14, 0),
                        allDay: false
                    },
                    {
                        title: 'Cine Club DDC - Cajamarca',
                        start: new Date(y, m, d + 1, 19, 0),
                        end: new Date(y, m, d + 1, 22, 30),
                        allDay: false
                    },
                    {
                        title: 'Taller "Herederos del Clarín Cajamarquino"',
                        start: new Date(y, m, 28),
                        end: new Date(y, m, 29),
                    }
                ],
                eventClick: function (calEvent, jsEvent, view) {

                    $(this).css('border-color', 'red');
                },
                dayClick: function (date) {
                    if (count == 0) {
                        x = $(this);
                        $(this).css('background-color', 'lightSkyBlue');
                        $('#FechaIni').val(date.format('DD') + '/' + date.format('MM') + '/' + date.format('YYYY'));
                        $('#FechaFin').val(date.format('DD') + '/' + date.format('MM') + '/' + date.format('YYYY'));
                        count++;
                        $('#calendario2 .input-group.date').datepicker('setStartDate', $('#FechaIni').val());
                    } else {
                        x.css('background-color', 'white');
                        x = $(this);
                        $(this).css('background-color', 'lightSkyBlue');
                        $('#FechaIni').val(date.format('DD') + '/' + date.format('MM') + '/' + date.format('YYYY'));
                        $('#FechaFin').val(date.format('DD') + '/' + date.format('MM') + '/' + date.format('YYYY'));
                        $('#calendario2 .input-group.date').datepicker('setStartDate', $('#FechaIni').val());
                    }
                    
                },
                navLinks: true,
                navLinkDayClick: function (date, jsEvent) {
                    $('#calendar').fullCalendar('changeView', 'agendaDay', date.format());
                }
            });


        });
    </script>
}
